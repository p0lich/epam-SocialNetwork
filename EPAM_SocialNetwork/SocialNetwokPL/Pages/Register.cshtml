@using Entities;
@using Dependencies;
@using EPAM.SocialNetwork.BLL.Interfaces;

@{
    Layout = "~/Pages/Layouts/_BasicLayout.cshtml";

    ILogic logic = DependencyResolver.GetInstance().UserLogic;
}

@{
    if (IsPost)
    {
        if (Request["userPassword"] == Request["userRepPassword"])
        {
            if (logic.IsLoginUnique("userLogin"))
            {
                User user = new User(
                    login: Request["userLogin"],
                    password: Request["userPassword"]
                    );

                logic.CreateUser(user);

                FormsAuthentication.SetAuthCookie(user.Login, true);

                Response.Redirect("~/Pages/UserPage.cshtml");
            }
        }
    }
}

<form method="post">
    <div class="form-row">
        <div class="form-group col-md-6">
            <label for="inputLogin">Login</label>
            <input type="text" class="form-control" id="inputLogin" placeholder="Login" name="userLogin">
        </div>
        <div class="form-group col-md-6">
            <label for="inputPassword">Password</label>
            <input type="password" class="form-control" id="inputPassword" placeholder="Password" name="userPassword">
        </div>
        <div class="form-group col-md-6">
            <label for="inputPassword2">Repeat password</label>
            <input type="password" class="form-control" id="inputPassword2" placeholder="Repeat password" name="userRepPassword">
        </div>
    </div>
    <div class="form-group">
        <label for="Gender">Gender</label>
        <input type="text" class="form-control" id="Gender" placeholder="not implemented">
    </div>
    <div class="form-group">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" id="gridCheck">
            <label class="form-check-label" for="gridCheck">
                Check me out
            </label>
        </div>
    </div>
    <button type="submit" class="btn btn-primary">Sign in</button>
</form>